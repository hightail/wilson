(()=>{"use strict";({927:function(){!function(e,n,t){var o=new function(e){var o=this,i=e,r=null,s={components:{},behaviors:{},services:{},filters:{}},a=null,l=null,c=null,u=null,p={},f={},d=[];function h(e,n){return e+t.upperFirst(t.camelCase(n))}function g(e,n,o){if(!t.isString(n))throw new Error(e+" name must be a string!!!");if(!e)throw new Error("Failed to validate definition params. Type is null or undefined!!");var i=null,r="component"===e?"controller":"primary";if(!t.isFunction(o)&&t.isEmpty(o)?i="definition is empty and cannot be processed.":t.isFunction(o)||t.isArray(o)||(i="definition must be a Function or an Array!!!"),i)throw new Error(e+" ["+n+"] "+r+" "+i)}this.config=r,Object.defineProperty(this,"routeInfo",{get:function(){return t.cloneDeep(p)}}),this.setAppConfig=function(e){this.config=r=e},this.getActivePage=function(){return u},this.getActiveComponent=function(e){return f[e]},this.getActiveComponentList=function(){return t.map(f,(function(e){return e}))},this.findComponentId=function(e){return e&&e.length?e.data().wilsonComponentId||this.findComponentId(e.parent()):null},this.destroyComponent=function(e){var n=this.getActiveComponent(e);n&&n.$destroy()},this.router=function(e){this.service("WilsonRouteService",e)},this.filter=function(e,n){g("filter",e,n);var o=t.camelCase(e);if(!s.filters[o]){var r=l||i;(r.filter||r.register)(o,t.isArray(n)?n:function(){return n}),s.filters[o]=!0}},this.component=function(e,n){if(!r)return d.push({type:"component",args:arguments});var l=h(r.app.selectors.component,e);if(!s.components[l]){var c={restrict:"EA",templateUrl:e.toLowerCase(),replace:!0,scope:{}};t.extend(c,n),g("component",e,c.controller),c.controller=function(e,n,t){return["ComponentFactoryService","WilsonUtils","$scope","$element","$attrs",function(i,r,s,a,l){var c=o.getActiveComponent(o.findComponentId(a)),u=r.generateUUID();a.data("wilsonComponentId",u),f[u]=i.create(u,e,n,this,c,s,a,l,t),s.on.event("$destroy",(function(){delete f[u]}))}]}(e,c.controller,c),(a||i).directive(l,(function(){return c})),s.components[l]=!0}},this.behavior=function(e,n){if(!r)return d.push({type:"behavior",args:arguments});var o=h(r.app.selectors.behavior,e);s.behaviors[o]||(g("behavior",e,n),(a||i).directive(o,function(e){return["$injector","WilsonEventHelper",function(n,o){var i=n.invoke(e),r=i.link,s=t.isArray(e)?e[e.length-1]:e;return r&&(i.link=function(e,n,t,i){e.hasOwnProperty("on")||(e.on=new o(e)),r.apply(s,[e,n,t,i])}),i}]}(n)),s.behaviors[o]=!0)},this.service=function(e,n){g("service",e,n),s.services[e]||((c||i).factory(e,n),s.services[e]=!0)},this.class=this.service,this.factory=this.service,this.utility=this.service,this.resource=this.service,i.config(["$interpolateProvider","$locationProvider","i18nextServiceProvider","$routeProvider","localStorageServiceProvider","$compileProvider","$controllerProvider","$filterProvider","$provide",function(e,o,i,s,f,d,h,g,v){var m=n.wilson.config;l=g,c=v,(a=d).commentDirectivesEnabled(!1),a.cssClassDirectivesEnabled(!1),a.debugInfoEnabled(m.debugInfoEnabled),e.startSymbol("[["),e.endSymbol("]]"),i.init({lng:m.i18n.lng,resStore:m.i18n.resStore,ns:{namespaces:m.i18n.namespaces},fallbackToDefaultNS:!1,nsseparator:":::",keyseparator:"::",useCookie:!1,useLocalStorage:m.i18n.useLocalStorage,localStorageExpirationTime:m.i18n.localStorageExpirationTime,supportedLngs:t.map(m.i18n.supportedLngs,"locale"),languageData:m.i18n.supportedLngs,fallbackLng:m.i18n.fallbackLng,sendMissing:m.i18n.sendMissing,sendMissingTo:"all",resPostPath:"/locales/add/__lng__/__ns__",resSetPath:"/client/locales/__lng__/__ns__.json",resGetPath:"/client/locales/__lng__/__ns__.json"}),f.setPrefix(m.app.localStoragePrefix||"wilson"),o.html5Mode(!0).hashPrefix("!"),function(e,o){var i=t.findIndex(e,{path:null});if(-1===i)throw new Error("Null route MUST be specified in routes!");if(i<e.length-1)throw new Error("Null route MUST be the last specified route!");t.each(e,(function(i){!function(e,o,i){if(!i)throw new Error("No RouteProvider included! Cannot create route!");if(t.isUndefined(e.path))throw new Error("Route information is invalid! Missing path definition: \n"+JSON.stringify(e,void 0,2));var s,a,l={controller:function(){u=e.component},template:(s=e.component,a=r.app.selectors.component+"-"+t.kebabCase(s),"<"+a+"></"+a+">"),componentName:e.component,resolve:{title:["$rootScope","WilsonRouter",function(n,o){return t.merge(n,{page:{title:o.getTitleText(e.title)}}),n.page.title}],component:["$route","$q","$location","$window","WilsonRouter","WilsonUtils","ComponentLoaderService",function(i,r,s,a,l,c,u){var f=s.path(),d=function(e,n){var o=t.find(n,{path:e});return(o=o||t.find(n,{path:null}))&&o.options?t.clone(o.options):{}}(i.current.originalPath,o),h=t.extend({},d,e.defaultParams||{},i.current.params);return c.replaceObject(p,h),l.handleRouteChange(f,d,e).then((function(){return u.load(e.component)})).then((function(e){return e.version!==n.wilson.config.app.version&&a.location.reload(),e})).catch((function(e){return r.reject(e)}))}],dependencies:["$q","WilsonRouter",function(n,t){var o=[];return o.push(t.loadDependencies(e)),o.push(t.loadSession()),n.allSettled(o)}],retryOriginalRoute:["$location","$route","localStorageService",function(e,n,o){var i=o.get("retryRoute");t.isObject(i)&&e.path()===i.path?i.attempt>0?i.originalPath&&i.path!==i.originalPath&&(o.remove("retryRoute"),e.path(i.originalPath)):(i.attempt++,o.add("retryRoute",i)):o.remove("retryRoute")}]}};null!==e.path?i.when(e.path,l):i.otherwise(l)}(i,e,o)}))}(m.routes,s)}]),i.run(["$rootScope","$templateCache","$location","$timeout","WilsonUtils","WilsonLogger","ComponentLoaderService",function(e,n,i,r,s,a,l){var c=function(){};o.utils=s,o.log=a,e.page={title:"Wilson"},e.triggerDigest=function(){return r(c)},e.bindToDigest=function(n,t){return t=t||this,n?function(){n.apply(t,arguments),e.triggerDigest()}:c},t.each(d,(function(e){o[e.type].apply(o,e.args)}));var u=e.$on("$locationChangeSuccess",(function(){var e={};t.each(o.config.routes,(function(n){n.preload&&!e[n.component]&&(e[n.component]=l.load(n.component))})),u()}))}])}(n.module("wilson",["ngRoute","LocalStorageModule","wilson.config","wilson.router","wilson.i18n","wilson.utils","wilson.decorators","wilson.logger","wilson.coreTemplates"]));n.wilson=e.wilson=o}(this,angular,_)}})[927]()})();